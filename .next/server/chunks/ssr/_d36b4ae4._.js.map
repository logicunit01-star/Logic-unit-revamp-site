{"version":3,"sources":["../../../../lib/api.ts","../../../../components/sections/CTA.tsx/__nextjs-internal-proxy.mjs","../../../../components/insights_page/InsightsList.tsx/__nextjs-internal-proxy.mjs","../../../../app/insights/page.tsx"],"sourcesContent":["import { Post } from './cms';\n\nconst STRAPI_URL = 'http://localhost:1337';\nconst API_URL = `${STRAPI_URL}/api/articles?populate=*`;\n\n// Generic Strapi type supporting BOTH wrapped and unwrapped responses\nexport type StrapiPost = {\n  id: number;\n  attributes?: any; // If attributes wrapper exists\n} & Record<string, any>; // If attributes wrapper was removed\n\n// Safe mapper for Strapi â†’ Your Post type\nexport const mapStrapiPostToPost = (strapiPost: StrapiPost): Post => {\n  if (!strapiPost) {\n    throw new Error(\"Invalid Strapi post structure\");\n  }\n\n  // SUPPORT BOTH STRUCTURES:\n  // 1) { id, attributes: { ... } }\n  // 2) { id, title, slug, ... }\n  const attrs = strapiPost.attributes || strapiPost;\n\n  if (!attrs) {\n    throw new Error(\"Invalid Strapi post structure: missing attributes\");\n  }\n\n  // Handle cover image\n  let imageUrl = 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2070&auto=format&fit=crop';\n\n  const coverUrl = attrs.cover?.data?.attributes?.url;\n  if (coverUrl) {\n    imageUrl = coverUrl.startsWith('http') ? coverUrl : `${STRAPI_URL}${coverUrl}`;\n  }\n\n  // Handle author avatar\n  let avatarUrl = 'https://logic-unit.com/wp-content/uploads/2019/06/cropped-logic-unit-logo.png';\n\n  const avatarAttr = attrs.author?.data?.attributes?.avatar?.data?.attributes?.url;\n  if (avatarAttr) {\n    avatarUrl = avatarAttr.startsWith('http') ? avatarAttr : `${STRAPI_URL}${avatarAttr}`;\n  }\n\n  return {\n    slug: attrs.slug || '',\n    title: attrs.title || 'Untitled',\n    postDescription:\n      attrs.description ||\n      (attrs.content\n        ? attrs.content.replace(/<[^>]*>?/gm, '').slice(0, 150) + '...'\n        : ''),\n    excerpt: attrs.excerpt || '',\n    image: imageUrl,\n\n    author: {\n      name: attrs.author?.data?.attributes?.name || 'Logic-Unit Team',\n      avatar: avatarUrl,\n    },\n\n    date: attrs.publishedAt\n      ? new Date(attrs.publishedAt).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n      })\n      : '',\n\n    category: (() => {\n      // Debug: log the category structure\n      console.log('Category structure:', JSON.stringify(attrs.category, null, 2));\n\n      // Handle wrapped structure: { data: { id, documentId, attributes: { name } } }\n      if (attrs.category?.data) {\n        return {\n          id: attrs.category.data.id || 0,\n          documentId: attrs.category.data.documentId || '',\n          name: attrs.category.data.attributes?.name || 'Insights',\n        };\n      }\n\n      // Handle unwrapped structure: { id, documentId, name }\n      if (attrs.category?.id) {\n        return {\n          id: attrs.category.id,\n          documentId: attrs.category.documentId || '',\n          name: attrs.category.name || 'Insights',\n        };\n      }\n\n      // Default fallback\n      return {\n        id: 0,\n        documentId: '',\n        name: 'Insights',\n      };\n    })(),\n\n    content: attrs.content || '',\n    blocks: attrs.block || attrs.blocks || [], // Support both 'block' and 'blocks' field names\n  };\n};\n\n// Fetch ALL posts\nexport const fetchPosts = async (): Promise<Post[]> => {\n  try {\n    console.log('Fetching posts from:', API_URL);\n    const res = await fetch(API_URL, { cache: 'no-store' });\n\n    console.log('Response status:', res.status);\n    if (!res.ok) throw new Error(`Failed to fetch posts: ${res.status}`);\n\n    const json = await res.json();\n\n    console.log('API Response data length:', json.data?.length);\n\n    if (!Array.isArray(json.data)) {\n      console.error(\"Invalid API response structure\", json);\n      return [];\n    }\n\n    const mappedPosts = json.data\n      .map((p) => {\n        try {\n          return mapStrapiPostToPost(p);\n        } catch (e) {\n          console.error(\"Error mapping post:\", e);\n          return null;\n        }\n      })\n      .filter((p): p is Post => p !== null);\n\n    console.log(`Returning ${mappedPosts.length} mapped posts`);\n    return mappedPosts;\n  } catch (error) {\n    console.error(\"Error fetching posts:\", error);\n    return [];\n  }\n};\n\n// Fetch SINGLE POST by slug\nexport const fetchPostBySlug = async (slug: string): Promise<Post | null> => {\n  try {\n    const url = `${STRAPI_URL}/api/articles?filters[slug][$eq]=${slug}&populate=*`;\n    const res = await fetch(url, { cache: 'no-store' });\n\n    if (!res.ok) throw new Error(`Failed to fetch post: ${res.status}`);\n\n    const json = await res.json();\n\n    if (!json.data || !Array.isArray(json.data) || json.data.length === 0) {\n      return null;\n    }\n\n    return mapStrapiPostToPost(json.data[0]);\n  } catch (error) {\n    console.error(\"Error fetching post:\", error);\n    return null;\n  }\n};","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/sections/CTA.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/sections/CTA.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/insights_page/InsightsList.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/insights_page/InsightsList.tsx\",\n    \"default\",\n);\n","import React from 'react';\nimport { fetchPosts } from '@/lib/api';\nimport CTA from '@/components/sections/CTA';\nimport ContactForm from '@/components/sections/ContactForm';\nimport InsightsList from '@/components/insights_page/InsightsList';\n\nexport const dynamic = 'force-dynamic'; // Ensure fresh data on every request\n\nconst InsightsPage = async () => {\n  const posts = await fetchPosts();\n\n  return (\n    <div className=\"bg-brand-bg-main\">\n      <section className=\"bg-white pt-28 pb-16 text-center\">\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-extrabold font-heading bg-clip-text text-transparent bg-gradient-to-r from-brand-primary to-brand-accent pb-2\">\n            Insights & Resources\n          </h1>\n          <p className=\"mt-4 text-lg text-brand-dark/80 max-w-3xl mx-auto\">\n            Your hub for the latest industry trends, expert analysis, and deep dives into the technologies shaping our world.\n          </p>\n        </div>\n      </section>\n\n      <InsightsList initialPosts={posts} />\n\n\n      <CTA\n        title=\"Have a Project in Mind?\"\n        subtitle=\"Let's discuss how our expertise can bring your vision to life. Contact us for a free consultation.\"\n        buttonText=\"Get in Touch\"\n        href=\"/contact\"\n      />\n    </div>\n  );\n};\n\nexport default InsightsPage;\n\n"],"names":[],"mappings":"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","ignoreList":[1,2]}